<html>
    <head>
        <title>Bike Training Zone Calculator</title>
        <style>
            table {
                font-family: arial, sans-serif;
                border-collapse: collapse;
                width: 618px;
            }

            td, th {
                border: 1px solid #dddddd;
                text-align: left;
                padding: 8px;
            }

            tr:nth-child(even) {
                background-color: #eeeeee;
            }
        </style>
    </head>
    <body>

        <input type="number" id="ftp" placeholder='FTP' size=13 />
        <input type="number" id="hr" placeholder='FTP Heart Rate' size=13 />
        <input type="number" id="weight" placeholder='Weight (kg)' size=13 />
        <select id="gender">
            <option value="" disabled selected>Select your gender</option>
            <option value="female">female</option>
            <option value="male">male</option>
            <option value="other">other</option>
        </select>

        <p id="physicalCondition"></p>

        <table id='ftpTable'>
            <tr>
                <th>Train Zone</th>
                <th>Level</th>
                <th>Heart Rate</th>
                <th>Watt</th>
            </tr>
            <tr>
                <td>Zone 1</td>
                <td>Active recovery</td>
                <td>-</td>
                <td>-</td>
            </tr>
            <tr>
                <td>Zone 2</td>
                <td>Endurance</td>
                <td>-</td>
                <td>-</td>
            </tr>
            <tr>
                <td>Zone 3</td>
                <td>Tempo</td>
                <td>-</td>
                <td>-</td>
            </tr>
            <tr>
                <td>Zone 4</td>
                <td>Threshold</td>
                <td>-</td>
                <td>-</td>
            </tr>
            <tr>
                <td>Zone 5</td>
                <td>VO2max</td>
                <td>-</td>
                <td>-</td>
            </tr>
            <tr>
                <td>Zone 6</td>
                <td>Anaerobic</td>
                <td>-</td>
                <td>-</td>
            </tr>
            <tr>
                <td>Zone 7</td>
                <td>Neuromusculair</td>
                <td>-</td>
                <td>-</td>
            </tr>
        </table>

        <script>
            document.getElementById("ftp").addEventListener("input", updateFTP);
            document.getElementById("hr").addEventListener("input", updateHR);
            document.getElementById("weight").addEventListener("input", updatePhysicalCondition);
            document.getElementById("gender").addEventListener("change", updatePhysicalCondition);

            function updateFTP(event) {
                var ftpTable = document.getElementById("ftpTable");

                if (this.value) {
                    const zone1 = Math.floor(0.55 * this.value);
                    const zone2 = Math.floor(0.75 * this.value);
                    const zone3 = Math.floor(0.90 * this.value);
                    const zone4 = Math.floor(1.05 * this.value);
                    const zone5 = Math.floor(1.20 * this.value);
                    const zone6 = Math.floor(2.85 * this.value);

                    ftpTable.rows[1].cells[3].innerHTML = "< " + zone1;
                    ftpTable.rows[2].cells[3].innerHTML = zone1 + " - " + zone2;
                    ftpTable.rows[3].cells[3].innerHTML = zone2 + " - " + zone3;
                    ftpTable.rows[4].cells[3].innerHTML = zone3 + " - " + zone4;
                    ftpTable.rows[5].cells[3].innerHTML = zone4 + " - " + zone5;
                    ftpTable.rows[6].cells[3].innerHTML = zone5 + " - " + zone6;
                    ftpTable.rows[7].cells[3].innerHTML = "> " + zone6;
                } else {
                    ftpTable.rows[1].cells[3].innerHTML = "-";
                    ftpTable.rows[2].cells[3].innerHTML = "-";
                    ftpTable.rows[3].cells[3].innerHTML = "-";
                    ftpTable.rows[4].cells[3].innerHTML = "-";
                    ftpTable.rows[5].cells[3].innerHTML = "-";
                    ftpTable.rows[6].cells[3].innerHTML = "-";
                    ftpTable.rows[7].cells[3].innerHTML = "-";
                }

                updatePhysicalCondition();
            }

            function updateHR(event) {
                var ftpTable = document.getElementById("ftpTable");

                if (this.value) {
                    const zone0 = Math.floor(0.60 * this.value);
                    const zone1 = Math.floor(0.74 * this.value);
                    const zone2 = Math.floor(0.84 * this.value);
                    const zone3 = Math.floor(0.94 * this.value);
                    const zone4 = Math.floor(1.00 * this.value);

                    ftpTable.rows[1].cells[2].innerHTML = zone0 + " - " + zone1;
                    ftpTable.rows[2].cells[2].innerHTML = zone1 + " - " + zone2;
                    ftpTable.rows[3].cells[2].innerHTML = zone2 + " - " + zone3;
                    ftpTable.rows[4].cells[2].innerHTML = zone3 + " - " + zone4;
                    ftpTable.rows[5].cells[2].innerHTML = "> " + zone4;
                    ftpTable.rows[6].cells[2].innerHTML = "nvt";
                    ftpTable.rows[7].cells[2].innerHTML = "nvt";
                } else {
                    ftpTable.rows[1].cells[2].innerHTML = "-";
                    ftpTable.rows[2].cells[2].innerHTML = "-";
                    ftpTable.rows[3].cells[2].innerHTML = "-";
                    ftpTable.rows[4].cells[2].innerHTML = "-";
                    ftpTable.rows[5].cells[2].innerHTML = "-";
                    ftpTable.rows[6].cells[2].innerHTML = "-";
                    ftpTable.rows[7].cells[2].innerHTML = "-";
                }
            }

            function updatePhysicalCondition(event) {
                const ftpValue = document.getElementById("ftp").value;
                const weightValue = document.getElementById("weight").value;
                const genderValue = document.getElementById("gender").value;

                var physicalCondition = document.getElementById("physicalCondition");
                if (ftpValue !== ""
                        && weightValue !== ""
                        && 0 < weightValue
                        && genderValue !== "") {
                    const wattPerKg = ftpValue / weightValue;
                    var msg = "Watt per kg: " + wattPerKg.toFixed(2) + ".";
                    if (genderValue == "female") {
                        if (wattPerKg < 1.7) {
                            msg += " Physical condition: Very bad.";
                        } else if (wattPerKg < 2.3) {
                            msg += " Physical condition: Bad.";
                        } else if (wattPerKg < 2.8) {
                            msg += " Physical condition: Untrained.";
                        } else if (wattPerKg < 3.4) {
                            msg += " Physical condition: Trained.";
                        } else if (wattPerKg < 4.0) {
                            msg += " Physical condition: Well Trained.";
                        } else if (wattPerKg < 4.6) {
                            msg += " Physical condition: Regional level.";
                        } else if (wattPerKg < 5.1) {
                            msg += " Physical condition: National level.";
                        } else if (wattPerKg < 5.7) {
                            msg += " Physical condition: International level.";
                        } else {
                            msg += " Physical condition: World class level.";
                        }
                    } else {
                        if (wattPerKg < 1.9) {
                            msg += " Physical condition: Very bad.";
                        } else if (wattPerKg < 2.6) {
                            msg += " Physical condition: Bad.";
                        } else if (wattPerKg < 3.2) {
                            msg += " Physical condition: Untrained.";
                        } else if (wattPerKg < 3.8) {
                            msg += " Physical condition: Trained.";
                        } else if (wattPerKg < 4.5) {
                            msg += " Physical condition: Well Trained.";
                        } else if (wattPerKg < 5.1) {
                            msg += " Physical condition: Regional level.";
                        } else if (wattPerKg < 5.8) {
                            msg += " Physical condition: National level.";
                        } else if (wattPerKg < 6.4) {
                            msg += " Physical condition: International level.";
                        } else {
                            msg += " Physical condition: World class level.";
                        }
                    }
                    physicalCondition.innerHTML = msg;
                } else {
                    physicalCondition.innerHTML = "";
                }
            }
        </script>

    </body>
</html>
